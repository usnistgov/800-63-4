/*
 * v0.1 121011 : First Test Version
 * v1.0 121012 : Added Cookie Synchronizing and filtered out Outbound tracking of cross- and sub-domain links
 * v1.1 121015 : Changed cross-domain to use setAllowAnchor and fixed problem with some links
 * v1.2 121015-2 : Added incoming cross-domain tracking to default _gaq tracker by adding _setAllowLinker and _setAllowAnchor
 * v1.3 121015-3 : All Cross-domain Tracking removed
 * v1.4 121015-4 : Multiple Search parameters and XDT links tracked as events
 * v1.5 121122 : Change to sub-domain level visits (cookies). _DOMReady delays tracking so goes last. ECereto Review. JSHinted
 * v1.6 130107 : Added Agency, sub-agency and Cookie timeout variables and functions
 * v1.61 130115 : Fix for (elm in ... now for (var elm = 0 Added Agency, sub-agency and Cookie timeout variables and functions
 * v1.62 130123 : Using Slots 33, 34, 35 for Page Level Custom Vars
 * v1.7 130503 : Single File Version
 * v1.71 130708 : Single File s/d Ver and AGENCY/SUB defaulting to hostnames instead of 'unspecified'
 * v1.72 130719 : SFS PUAs and exts
*/
/**
 * @preserve
 * Google Analytics Government Wide Site Usage Measurement Reference:Brian Katz, Cardinal Path
 * v1.73 130827 : Final Katz-CP Version. exts, multiple devuas
**/

/*
* Begin E-Nor
* v1.74 131022 : Fix for multiple PUA loop
* v1.75 140221 : Added option to use dc.js for demographic data
* v1.76 140514 : Fix for bug in routine triggered by sdor=true. Routine wrote an extra sub-domain cookie in addition to the cross-sub-domain cookie.
*/

var _gaq=_gaq||[];var _gas=_gas||[];var GSA_CPwrapGA=(function(){var h;var i=document.location.hostname;var d={VERSION:"v1.76 140514 : Fix for subdomain cookie in cross subdomain tracking",SEARCH_PARAMS:"q|querytext|nasaInclude|k|QT",HOST_DOMAIN_OR:i,LEADING_PERIOD:".",GWT_UAID:["UA-33523145-1"],AGENCY:"",VISITOR_TIMEOUT:-1,CAMPAIGN_TIMEOUT:-1,VISIT_TIMEOUT:-1,ANONYMIZE_IP:true,YOUTUBE:true};var k={agency:{key:"Agency",slot:33,scope:3},sub_agency:{key:"Sub-Agency",slot:34,scope:3},version:{key:"Code Ver",slot:35,scope:3}};var j=function(){a();d.HOST_DOMAIN_OR=d.HOST_DOMAIN_OR.replace(/^www\./i,"");var n=e(d.HOST_DOMAIN_OR);d.LEADING_PERIOD=n[1];for(var m=0;m<d.GWT_UAID.length;m++){_gas.push(["GSA_CP"+(m+1)+"._setAccount",d.GWT_UAID[m]])}if(d.PARALLEL_UA&&!d.DEBUG_MODE){for(m=d.GWT_UAID.length;m<d.PARALLEL_UA.length+d.GWT_UAID.length;m++){_gas.push(["GSA_CP"+(m+1)+"._setAccount",d.PARALLEL_UA[m-1]])}}if(d.ANONYMIZE_IP){_gaq.push(["_gat._anonymizeIp"])}_gas.push(["_setDomainName",d.LEADING_PERIOD+d.HOST_DOMAIN_OR]);_gaq.push(["_setDomainName",d.LEADING_PERIOD+d.HOST_DOMAIN_OR]);b();if(n[0]){_gas.push(["_setAllowHash",false])}_gas.push(["_gasTrackOutboundLinks"]);if(d.EXTS){_gas.push(["_gasTrackDownloads",{extensions:d.EXTS.split(",")}])}else{_gas.push(["_gasTrackDownloads"])}_gas.push(["_gasTrackMailto"]);if(d.YOUTUBE){_gas.push(["_gasTrackYoutube",{percentages:[33,66,90],force:true}])}_gas.push(["_addHook","_trackEvent",function(o,p){var q=p.match(/([^.]+\.(gov|mil)$)/);if(o==="Outbound"&&typeof p==="string"&&q){return(document.location.hostname.indexOf(q[1])===-1)}}]);_gas.push(["_addHook","_trackPageview",function(o){var p=new RegExp("([?&])("+d.SEARCH_PARAMS+")(=[^&]*)","i");if(p.test(o)){o=o.replace(p,"$1query$3")}return[o]}])};var b=function(){if(d.VISIT_TIMEOUT>-1){_gaq.push(["_setSessionCookieTimeout",d.VISIT_TIMEOUT*1000*60])}if(d.VISITOR_TIMEOUT>-1){_gaq.push(["_setVisitorCookieTimeout",d.VISITOR_TIMEOUT*1000*60*60*24*30.416667])}if(d.CAMPAIGN_TIMEOUT>-1){_gaq.push(["_setCampaignCookieTimeout",d.CAMPAIGN_TIMEOUT*1000*60*60*24*30.416667])}};var f=function(n){n=n||i;n=n.match(/^(?:https?:\/\/)?([^\/:]+)/)[1];if(n.match(/(\d+\.){3}(\d+)/)||n.search(/\./)==-1){return n}try{if(/\.(gov|mil)$/i.test(n)){n=n.match(/\.([^.]+\.(gov|mil)$)/i)[1]}else{n=n.match(/(([^.\/]+\.[^.\/]{2,3}\.[^.\/]{2})|(([^.\/]+\.)[^.\/]{2,4}))(\/.*)?$/)[1]}}catch(m){}return n.toLowerCase()};var c=function(m){var o=function(p){return undefined==p||"-"==p||""==p};var n=function(t){var q=1,p=0,r,s;if(!o(t)){q=0;for(r=t.length-1;r>=0;r--){s=t.charCodeAt(r);q=(q<<6&268435455)+s+(s<<14);p=q&266338304;q=p!==0?q^p>>21:q}}return q};return n(m)};var e=function(n){var m=document.cookie.match(/__utma=[^.]+/g);var q=[false,""];if(!m){return q}h=c(n);for(var p=0;p<m.length;p++){m[p]=m[p].substr(7);var o=(h==m[p]);if(o){q[0]=false;return q}else{o=(c("."+n)==m[p]);q[1]=o?".":""}q[0]=q[0]||("1"==m[p])}return q};var g=function(){l(d.AGENCY,k.agency);l(d.SUB_AGENCY,k.sub_agency)};var l=function(n,p){if(!n){return}var m=_gat._getTrackerByName();var o=m._getVisitorCustomVar(p.slot);if(!o){_gas.push(["_setCustomVar",p.slot,p.key,n,p.scope])}};this.onEveryPage=function(){var m=document.location.pathname+document.location.search+document.location.hash;if(document.title.search(/404|not found/i)!==-1){var n="/vpv404/"+m;m=n.replace(/\/\//g,"/")+"/"+document.referrer}l(d.VERSION,k.version);g();_gas.push(["_trackPageview",m])};var a=function a(){var q=document.getElementById("_fed_an_js_tag");var n;if(!q){n=document.getElementsByTagName("script")}for(var o=0;n&&!q&&o<n.length;o++){var m=n[o];if(/federated-analytics.*\.js/i.test(m.src)){q=m}}if(q){q=q.src.split(/[?&]/);q.shift();for(var o=0;o<q.length;o++){var p=q[o].split("=");q[0]=q[0].toLowerCase();if("agency"==p[0]){d.AGENCY=p[1].toUpperCase()}else{if(/sub(-?agency)?/.test(p[0])){d.SUB_AGENCY=p[1].toUpperCase()}else{if("sp"==p[0]){p[1]=p[1].replace(/[,;\/]/g,"|");d.SEARCH_PARAMS=d.SEARCH_PARAMS+"|"+p[1];d.SEARCH_PARAMS=d.SEARCH_PARAMS.replace(/\|\|/g,"|")}else{if("vcto"==p[0]){d.VISITOR_TIMEOUT=parseInt(p[1])}else{if("camto"==p[0]){d.CAMPAIGN_TIMEOUT=parseInt(p[1])}else{if("pua"==p[0]){d.PARALLEL_UA=p[1].toUpperCase();d.PARALLEL_UA=d.PARALLEL_UA.split(",")}else{if("devua"==p[0]){d.GWT_UAID=p[1].toUpperCase();d.GWT_UAID=d.GWT_UAID.split(",");d.DEBUG_MODE=true}else{if("exts"==p[0]){d.EXTS=p[1].toLowerCase();d.EXTS=d.EXTS.replace(/ /g,"")}else{if("aip"==p[0]){d.ANONYMIZE_IP=("true"==p[1])?true:!("false"==p[1])}else{if("yt"==p[0]){d.YOUTUBE=("true"==p[1])?true:!("false"==p[1])}else{if("sdor"==p[0]){if(("true"==p[1])?true:!("false"==p[1])){d.HOST_DOMAIN_OR=f()}else{d.HOST_DOMAIN_OR=i}}}}}}}}}}}}}}d.AGENCY=d.AGENCY||"unspecified:"+d.HOST_DOMAIN_OR;d.SUB_AGENCY=d.SUB_AGENCY||(""+i);d.SUB_AGENCY=d.AGENCY+" - "+d.SUB_AGENCY;d.CAMPAIGN_TIMEOUT=Math.min(d.CAMPAIGN_TIMEOUT,d.VISITOR_TIMEOUT)};j()});(function(i,e){var c=function(){this._setDummyTracker()};c.prototype._setDummyTracker=function(){if(!this["tracker"]){var H=i._gat["_getTrackers"]();if(H.length>0){this["tracker"]=H[0]}}};c.prototype.inArray=function(J,I){if(J&&J.length){for(var H=0;H<J.length;H++){if(J[H]===I){return true}}}return false};c.prototype._sanitizeString=function(I,H){I=I.toLowerCase().replace(/^\ +/,"").replace(/\ +$/,"").replace(/\s+/g,"_").replace(/[áàâãåäæª]/g,"a").replace(/[éèêëЄ€]/g,"e").replace(/[íìîï]/g,"i").replace(/[óòôõöøº]/g,"o").replace(/[úùûü]/g,"u").replace(/[ç¢©]/g,"c");if(H){I=I.replace(/[^a-z0-9_\-]/g,"_")}return I.replace(/_+/g,"_")};c.prototype._addEventListener=function(K,I,J,H){var L=function(M){if(!M||!M.target){M=i.event;M.target=M.srcElement}return J.call(K,M)};if(K.addEventListener){K.addEventListener(I,L,!!H);return true}else{if(K.attachEvent){return K.attachEvent("on"+I,L)}else{I="on"+I;if(typeof K[I]==="function"){L=(function(M,N){return function(){M.apply(this,arguments);N.apply(this,arguments)}}(K[I],L))}K[I]=L;return true}}};c.prototype._liveEvent=function(H,J,I){var K=this;H=H.toUpperCase();H=H.split(",");K._addEventListener(r,J,function(M){for(var L=M.target;L.nodeName!=="HTML";L=L.parentNode){if(K.inArray(H,L.nodeName)||L.parentNode===null){break}}if(L&&K.inArray(H,L.nodeName)){I.call(L,M)}},true)};c.prototype._DOMReady=function(J){var I=this;function H(){if(H.done){return}H.done=true;J.apply(I,arguments)}if(/^(interactive|complete)/.test(r.readyState)){return H()}this._addEventListener(r,"DOMContentLoaded",H,false);this._addEventListener(i,"load",H,false)};i._gaq=i._gaq||[];var p=i._gas||[];if(p._accounts_length>=0){return}var r=i.document,y=Object.prototype.toString,m=Object.prototype.hasOwnProperty,g=Array.prototype.push,w=Array.prototype.slice,z=String.prototype.trim,E=String.prototype.indexOf,d=r.location.href,B=r.documentElement;function t(){var H=this;H.version="1.10.1";H._accounts={};H._accounts_length=0;H._queue=p;H._default_tracker="_gas1";H.gh={};H._hooks={_addHook:[H._addHook]};H.push(function(){H.gh=new c()})}t.prototype._addHook=function(I,H){if(typeof I==="string"&&typeof H==="function"){if(typeof _gas._hooks[I]==="undefined"){_gas._hooks[I]=[]}_gas._hooks[I].push(H)}return false};function h(H){return H===_gas._default_tracker?"":H+"."}function x(H){if(_gas.debug_mode){try{console.log(H)}catch(I){}}return i._gaq.push(H)}t.prototype._execute=function(){var O=w.call(arguments),R=this,H=O.shift(),M=true,K,P,Q,J,L,S=0;if(typeof H==="function"){return x((function(U,T){return function(){U.call(T)}}(H,R.gh)))}else{if(typeof H==="object"&&H.length>0){P=H.shift();if(E.call(P,".")>=0){J=P.split(".")[0];P=P.split(".")[1]}else{J=e}Q=R._hooks[P];if(Q&&Q.length>0){for(K=0;K<Q.length;K++){try{L=Q[K].apply(R.gh,H);if(L===false){M=false}else{if(L&&L.length>0){H=L}}}catch(N){if(P!=="_trackException"){R.push(["_trackException",N])}}}}if(M===false){return 1}if(P==="_setAccount"){for(K in R._accounts){if(R._accounts[K]===H[0]){if(J===e){return 1}}}J=J||"_gas"+String(R._accounts_length+1);if(typeof R._accounts._gas1==="undefined"&&E.call(J,"_gas")!==-1){J="_gas1"}R._accounts[J]=H[0];R._accounts_length+=1;J=h(J);S=x([J+P,H[0]]);R.gh._setDummyTracker();return S}if(P==="_link"||P==="_linkByPost"||P==="_require"||P==="_anonymizeIp"){O=w.call(H);O.unshift(P);return x(O)}var I;if(J&&R._accounts[J]){I=h(J)+P;O=w.call(H);O.unshift(I);return x(O)}if(R._accounts_length>0){for(K in R._accounts){if(m.call(R._accounts,K)){I=h(K)+P;O=w.call(H);O.unshift(I);S+=x(O)}}}else{O=w.call(H);O.unshift(P);return x(O)}return S?1:0}}};t.prototype.push=function(){var H=this;var I=w.call(arguments);for(var J=0;J<I.length;J++){(function(K,L){i._gaq.push(function(){L._execute.call(L,K)})}(I[J],H))}};i._gas=_gas=new t();_gas.push(["_addHook","_trackException",function(H,I){_gas.push(["_trackEvent","Exception "+(H.name||"Error"),I||H.message||H,d]);return false}]);_gas.push(["_addHook","_setDebug",function(H){_gas.debug_mode=!!H}]);_gas.push(["_addHook","_popHook",function(I){var H=_gas._hooks[I];if(H&&H.pop){H.pop()}return false}]);_gas.push(["_addHook","_gasSetDefaultTracker",function(H){_gas._default_tracker=H;return false}]);_gas.push(["_addHook","_trackEvent",function(){var H=w.call(arguments);if(H[3]){H[3]=(H[3]<0?0:Math.round(H[3]))||0}return H}]);function s(J,I){if(typeof J!=="string"){return false}var H=J.split("?")[0];H=H.split(".");H=H[H.length-1];if(H&&this.inArray(I,H)){return H}return false}var k=function(J){var H=this;if(!H._downloadTracked){H._downloadTracked=true}else{return}if(!J){J={extensions:[]}}else{if(typeof J==="string"){J={extensions:J.split(",")}}else{if(J.length>=1){J={extensions:J}}}}J.category=J.category||"Download";var I="xls,xlsx,doc,docx,ppt,pptx,pdf,txt,zip";I+=",rar,7z,gz,tgz,exe,wma,mov,avi,wmv,mp3,mp4,csv,tsv,mobi,epub,swf";I=I.split(",");J.extensions=J.extensions.concat(I);H._liveEvent("a","mousedown",function(M){var L=this;if(L.href){var K=s.call(H,L.href,J.extensions);if(K){_gas.push(["_trackEvent",J.category,K,L.href])}}});return false};_gas.push(["_addHook","_gasTrackDownloads",k]);_gas.push(["_addHook","_trackDownloads",k]);var q=function(I){if(!this._outboundTracked){this._outboundTracked=true}else{return}var H=this;if(!I){I={}}I.category=I.category||"Outbound";H._liveEvent("a","mousedown",function(M){var J=this;if((J.protocol==="http:"||J.protocol==="https:")&&E.call(J.hostname,r.location.hostname)===-1){var L=(J.pathname+J.search+""),K=E.call(L,"__utm");if(K!==-1){L=L.substring(0,K)}_gas.push(["_trackEvent",I.category,J.hostname,L])}})};_gas.push(["_addHook","_gasTrackOutboundLinks",q]);_gas.push(["_addHook","_trackOutboundLinks",q]);var G=function(H){if(!this._mailtoTracked){this._mailtoTracked=true}else{return}if(!H){H={}}H.category=H.category||"Mailto";this._liveEvent("a","mousedown",function(J){var I=J.target;if(I&&I.href&&I.href.toLowerCase&&E.call(I.href.toLowerCase(),"mailto:")===0){_gas.push(["_trackEvent",H.category,I.href.substr(7)])}});return false};_gas.push(["_addHook","_gasTrackMailto",G]);_gas.push(["_addHook","_trackMailto",G]);var f=[];var o;var l={};function v(K,J){if(l[J]===e||l[J].timeTriggers.length<=0){return false}var I=K.getCurrentTime()/K.getDuration()*100;if(I>=l[J].timeTriggers[0]){var H=l[J].timeTriggers.shift();_gas.push(["_trackEvent",o.category,H+"%",K.getVideoUrl()])}l[J].timer=setTimeout(v,1000,K,J)}function u(I){var H=I.getVideoUrl();if(l[H]&&l[H].timer){v(I,H);clearTimeout(l[H].timer)}}function j(I){if(f&&f.length){var H=I.getVideoUrl();if(l[H]){u(I)}else{l[H]={};l[H].timeTriggers=w.call(f)}l[H].timer=setTimeout(v,1000,I,H)}}function n(H){var I="";switch(H.data){case 0:I="finish";u(H.target);break;case 1:I="play";j(H.target);break;case 2:I="pause";u(H.target);break}if(I){_gas.push(["_trackEvent",o.category,I,H.target["getVideoUrl"]()])}}function A(H){_gas.push(["_trackEvent",o.category,"error ("+H.data+")",H.target["getVideoUrl"]()])}function D(){var M=r.getElementsByTagName("object");var J,N,L;var K=/(https?:\/\/www\.youtube(-nocookie)?\.com[^\/]*).*\/v\/([^&?]+)/;for(var I=0;I<M.length;I++){J=M[I].getElementsByTagName("param");for(var H=0;H<J.length;H++){if(J[H].name==="movie"&&J[H].value){L=J[H].value.match(K);if(L&&L[1]&&L[3]){N=r.createElement("iframe");N.src=L[1]+"/embed/"+L[3]+"?enablejsapi=1";N.width=M[I].width;N.height=M[I].height;N.setAttribute("frameBorder","0");N.setAttribute("allowfullscreen","");M[I].parentNode.insertBefore(N,M[I]);M[I].parentNode.removeChild(M[I]);I--}break}}}}function b(H){var I=H.force;var J=H.percentages;if(I){try{D()}catch(M){_gas.push(["_trackException",M,"GAS Error on youtube.js:_ytMigrateObjectEmbed"])}}var O=[];var L=r.getElementsByTagName("iframe");for(var K=0;K<L.length;K++){if(E.call(L[K].src,"//www.youtube.com/embed")>-1){if(E.call(L[K].src,"enablejsapi=1")<0){if(I){if(E.call(L[K].src,"?")<0){L[K].src+="?enablejsapi=1"}else{L[K].src+="&enablejsapi=1"}}else{continue}}O.push(L[K])}}if(O.length>0){if(J&&J.length){f=J}i.onYouTubePlayerAPIReady=function(){var S;for(var R=0;R<O.length;R++){S=new i.YT["Player"](O[R]);S.addEventListener("onStateChange",n);S.addEventListener("onError",A)}};var Q=r.createElement("script");var P="http:";if(r.location.protocol==="https:"){P="https:"}Q.src=P+"//www.youtube.com/player_api";Q.type="text/javascript";Q.async=true;var N=r.getElementsByTagName("script")[0];N.parentNode.insertBefore(Q,N)}}var F=function(J){var I=w.call(arguments);if(I[0]&&(typeof I[0]==="boolean"||I[0]==="force")){J={force:!!I[0]};if(I[1]&&I[1].length){J.percentages=I[1]}}J=J||{};J.force=J.force||false;J.category=J.category||"YouTube Video";J.percentages=J.percentages||[];o=J;var H=this;H._DOMReady(function(){b.call(H,J)});return false};_gas.push(["_addHook","_gasTrackYoutube",F]);_gas.push(["_addHook","_trackYoutube",F]);while(_gas._queue.length>0){_gas.push(_gas._queue.shift())}var a=C("display-advertising");function C(J){var I=r.getElementsByTagName("script");ThisScriptPath=I[I.length-1].src;J=J.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var H="[\\?&#038;]"+J+"=([^&#]*)";var L=new RegExp(H);var K=L.exec(ThisScriptPath);if(K==null){return"Not Set"}else{return decodeURIComponent(K[1].replace(/\+/g," "))}}if(typeof i._gat==="undefined"){(function(){var I=r.createElement("script");I.type="text/javascript";I.async=true;if(a=="true"){I.src=("https:"===r.location.protocol?"https://":"http://")+"stats.g.doubleclick.net/dc.js"}else{I.src=("https:"===r.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js"}var H=r.getElementsByTagName("script")[0];H.parentNode.insertBefore(I,H)}())}})(window);_gas.push(function(){this._DOMReady(function(){try{var a=new GSA_CPwrapGA();if(!document._gsaDelayGA){a.onEveryPage()}}catch(b){try{console.log(b.message);console.log(b.stack.toString())}catch(b){}}})});
